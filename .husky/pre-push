# Husky pre-push hook â€“ run Nx lint+test only on affected projects

# 1. Figure out the remote branch weâ€™re pushing to (`@{u}` = upstream)
BASE_REF=$(git rev-parse --abbrev-ref --symbolic-full-name @{u} 2>/dev/null)

# Fallback if upstream canâ€™t be resolved (detached HEAD, etc.)
[ -z "$BASE_REF" ] && BASE_REF=origin/main

echo "ğŸ”  Nx affected against $BASE_REF â€¦"
pnpm nx affected -t lint,test --base="$BASE_REF"
